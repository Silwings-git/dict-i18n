# 📘 Dict-I18n 快速入门指南

欢迎使用 **`dict-i18n`** —— 一个轻量、可扩展的字典国际化框架，专为 Java 应用中枚举值、状态码、类型标识符等字典字段的**多语言描述
**而设计。它可自动扫描字典定义，构建期间生成资源文件，运行时增强 HTTP 响应。

---

## ✨ 核心特性

* ✅ **基于注解的字典定义**：使用 `@DictDesc` 为字段添加国际化描述
* 🛠 **Maven 插件生成模板**：自动生成多语言配置文件
* 🔌 **多种加载器支持**：支持文件、数据库、Redis 等多种加载方式
* 🔄 **灵活加载顺序**：可配置优先级，实现多来源合并与覆盖
* ⚙️ **Spring Boot 无缝集成**：开箱即用，字段描述自动注入响应
* 🌐 **多语言切换与回退机制**：支持按语言动态切换、兜底逻辑
* 🔍 **自动递归扫描**：深层结构亦可识别注解定义
* 🚀 **高性能缓存**：减少重复加载，提升运行效率
* 🧩 **高度可扩展**：支持自定义加载器、语言上下文解析器等组件

---

## 🧱 环境要求

| 项目          | 要求                   |
|-------------|----------------------|
| Java        | JDK 1.8 及以上          |
| 构建工具        | Maven 3.6+           |
| Spring Boot | 推荐使用 Spring Boot 2.x |

> ⚠️ 当前版本基于 `HttpServletRequest`，**暂不兼容 Spring Boot 3 的 Jakarta Servlet 栈**。若你使用 Spring Boot 3，请关闭
> endpoint 功能：

```yaml
dict-i18n:
  starter:
    endpoint:
      enabled: false
```

---

## 🚀 快速集成指南

### 1️⃣ 添加依赖

```xml
<!-- Starter 核心依赖 -->
<dependency>
    <groupId>cn.silwings.dicti18n</groupId>
    <artifactId>dict-i18n-spring-boot-starter</artifactId>
    <version>1.0.5</version>
</dependency>

<!-- 加载器依赖：以 file 为例 -->
<dependency>
    <groupId>cn.silwings.dicti18n</groupId>
    <artifactId>dict-i18n-loader-file</artifactId>
    <version>1.0.5</version>
</dependency>

<!-- Maven 插件：生成国际化资源文件 -->
<plugin>
    <groupId>cn.silwings.dicti18n</groupId>
    <artifactId>dict-i18n-generator-maven-plugin</artifactId>
    <executions>
        <execution>
            <goals>
                <goal>yml</goal> <!-- 或使用 <goal>properties</goal> -->
            </goals>
        </execution>
    </executions>
    <configuration>
        <languages>
            <!-- 配置需要使用的语言,也可使用zh,en等不包含地区的形式 -->
            <language>zh-CN</language>
            <language>en-US</language>
        </languages>
        <verbose>true</verbose> <!-- 输出详细日志 -->
    </configuration>
</plugin>
```

---

### 2️⃣ 定义字典枚举类

```java
public enum OrderStatus implements Dict {
    PENDING, PAID, SHIPPED, COMPLETED, CANCELED;

    @Override
    public String dictName() {
        return "order_status";
    }

    @Override
    public String code() {
        return this.name();
    }
}
```

---

### 3️⃣ 生成国际化资源文件

在项目根目录执行：

```bash
mvn compile
```

默认会在 `resources/dict_i18n/` 目录下生成如下模板：

**dict\_i18n/dict\_zh-CN.yml**

```yaml
order_status:
  CANCELED: ''
  COMPLETED: ''
  PAID: ''
  PENDING: ''
  SHIPPED: ''
```

编辑填充描述内容：

```yaml
order_status:
  CANCELED: 已取消
  COMPLETED: 已完成
  PAID: 已支付
  PENDING: 待处理
  SHIPPED: 已发货
```

---

### 4️⃣ 自动增强 HTTP 响应

#### 示例实体类与控制器：

```java
public class OrderVO {
    private String orderStatus;

    @DictDesc(OrderStatus.class)
    private String orderStatusDesc;
    // getter & setter ...
}

@RestController
public class OrderController {
    @GetMapping("/order")
    public ResponseEntity<OrderVO> getOrder() {
        final OrderVO vo = new OrderVO();
        vo.setOrderStatus(OrderStatus.COMPLETED.code());
        return ResponseEntity.ok(vo);
    }
}
```

#### 示例响应（请求头带 Accept-Language: zh-CN）

```json
{
  "orderStatus": "COMPLETED",
  "orderStatusDesc": "已完成"
}
```

---

## 🧩 支持的加载器类型

| 类型         | 描述         | artifactId                  |
|------------|------------|-----------------------------|
| `declared` | 从代码中动态加载   | `dict-i18n-loader-declared` |
| `file`     | 从资源文件加载    | `dict-i18n-loader-file`     |
| `sql`      | 从数据库表加载    | `dict-i18n-loader-sql`      |
| `redis`    | 从 Redis 加载 | `dict-i18n-loader-redis`    |

> 🛠 你也可以实现 `DictI18nLoader` 接口，注册为 Bean 来接入自定义数据源。

---

## ⏭️ 后续步骤

现在你已经基本设置完成，你可以：

- 探索其他加载器选项，如Redis或SQL
- 配置更高级的选项，如自定义语言提供者
- 查看演示模块以获取更全面的示例

## 🧪 示例项目

查看演示项目：[dict-i18n-demo](../../../dict-i18n-demo)

---

## 📚 延伸阅读

- 🔌 [启动器说明](../starter/启动器说明.md)
- 🧩 [加载器说明](../loader/加载器说明.md)
- 🛠 [配置说明](../config/配置说明.md)
- ❓ [常见问题](../faq/常见问题.md)

---

| [< 文档首页](../首页.md) | [启动器说明 >](../starter/启动器说明.md) |
|:-------------------|-------------------------------:|